function getParameterByName(e) {
    var i = RegExp("[?&]" + e + "=([^&]*)").exec(window.location.search);
    return i && decodeURIComponent(i[1].replace(/\+/g, " "))
}

function getMajorPixiVersion(e) {
    var i = 4;
    return "v" === e.substr(0, 1) && (i = parseInt(e.substr(1, 1), 10)), i
}
jQuery(document).ready(function(e) {
    window.onpopstate = function(t) {
        i.pixiVersionString = getParameterByName("v") || "release", i.generateIFrameContent(), e(".select-group .select li.selected").removeClass("selected");
        var a = e('.select-group .select li[data-val="' + i.pixiVersionString + '"]');
        a.addClass("selected"), e(".select-group .select .current").text(a.text()), e(".main-content").animate({
            scrollTop: 0
        }, 200)
    };
    var i = i || {};
    i.allowedVersions = [4], i.pixiVersionString = getParameterByName("v") || "release", i.majorPixiVersion = getMajorPixiVersion(i.pixiVersionString), i.exampleUrl = "", i.exampleFilename = "", i.exampleTitle = "", i.exampleSourceCode = "", i.exampleRequiredPlugins = [], i.exampleValidVersions = [], i.editorOptions = {
        mode: "javascript",
        lineNumbers: !0,
        styleActiveLine: !0,
        matchBrackets: !0,
        viewportMargin: 1 / 0,
        lineWrapping: !0
    }, i.clickType = "click", i.animTime = .15, i.resize = function() {}, i.scriptsToLoad = ["https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"], i.scriptsLoaded = 0, i.loadScriptsAsync = function() {
        for (var t = 0; t < i.scriptsToLoad.length; t++) e.ajax({
            url: i.scriptsToLoad[t],
            dataType: "script",
            cache: !0,
            async: !0,
            success: i.fileLoaded
        });
        0 === i.scriptsToLoad.length && i.loadComplete()
    }, i.fileLoaded = function() {
        i.scriptsLoaded++, i.scriptsLoaded === i.scriptsToLoad.length && i.loadComplete()
    }, i.loadComplete = function() {
        e.getJSON("examples/manifest.json", function(t) {
            for (var a = Object.keys(t), n = 0; n < a.length; n++) {
                for (var s = '<span class="section" data-section="' + a[n] + '">' + a[n] + '</span><ul data-section="' + a[n] + '">', o = t[a[n]], r = 0; r < o.length; r++) {
                    var l = void 0 !== o[r].plugins ? o[r].plugins.join(",") : "",
                        c = void 0 !== o[r].validVersions ? o[r].validVersions.join(",") : "";
                    s += '<li data-src="' + o[r].entry + '" data-plugins="' + l + '" data-validVersions="' + c + '">' + o[r].title + "</li>"
                }
                s += "</ul>", e(".main-menu").append(s)
            }
            i.initNav()
        }), e.getJSON("https://api.github.com/repos/pixijs/pixi.js/git/refs/tags", function(t) {
            var a = [];
            i.allowedVersions.forEach(function(e) {
                var i = t.filter(function(i) {
                    return 0 === i.ref.indexOf("refs/tags/v" + e)
                });
                i.length > 5 && (i = i.slice(-5)), a = a.concat(i)
            }), a = a.map(function(e) {
                return e.ref.replace("refs/tags/", "")
            });
            for (var n = 0; n < a.length; n++) e(".select-group .select ul").append('<li data-val="' + a[n] + '">' + a[n] + "</li>");
            var s = e('.select-group .select li[data-val="' + i.pixiVersionString + '"]');
            s.addClass("selected"), e(".select-group .select .current").text(s.text())
        })
    }, i.initNav = function() {
        if (e(".main-menu .section").on(i.clickType, function() {
                e(this).next("ul").slideToggle(250), e(this).toggleClass("open")
            }), e(".main-menu li").on(i.clickType, function() {
                if (!e(this).hasClass("selected")) {
                    e(".main-menu li.selected").removeClass("selected"), e(this).addClass("selected"), i.closeMobileNav();
                    var t = "/" + e(this).parent().attr("data-section") + "/" + e(this).attr("data-src");
                    i.exampleTitle = e(this).text(), window.location.hash = t, document.title = i.exampleTitle + " - PixiJS Examples", ga("set", {
                        page: t,
                        title: i.exampleTitle
                    }), ga("send", "pageview"), i.exampleUrl = "examples/js/" + e(this).parent().attr("data-section") + "/" + e(this).attr("data-src"), i.exampleFilename = e(this).attr("data-src");
                    var a = e(this).attr("data-plugins");
                    i.exampleRequiredPlugins = "" === a ? [] : a.split(",");
                    var n = e(this).attr("data-validVersions");
                    i.exampleValidVersions = "" === n ? [4, 5] : n.split(",").map(function(e) {
                        return parseInt(e, 10)
                    }), e.ajax({
                        url: "examples/js/" + e(this).parent().attr("data-section") + "/" + e(this).attr("data-src"),
                        dataType: "text",
                        success: function(e) {
                            i.exampleSourceCode = e, i.generateIFrameContent()
                        }
                    })
                }
            }), i.generateIFrameContent = function() {
                for (var t = document.querySelectorAll("iframe"), a = 0; a < t.length; a++) t[a].parentNode.removeChild(t[a]);
                e("#example").html('<iframe id="preview" src="blank.html"></iframe>'), e(".CodeMirror").remove(), e(".main-content #code").html(i.exampleSourceCode);
                let n = "<!DOCTYPE html><html><head><style>";
                n += "body,html{margin:0px;height:100%;overflow:hidden;}canvas{width:100%;height:100%;}", n += "</style></head><body>", n += '<script src="https://code.jquery.com/jquery-3.3.1.min.js"><\/script>', n += '<script src="' + ("local" === i.pixiVersionString ? "dist/pixi.js" : 3 === i.majorPixiVersion ? "https://cdn.rawgit.com/GoodBoyDigital/pixi.js/" + i.pixiVersionString + "/bin/pixi.js" : "https://d157l7jdn8e5sf.cloudfront.net/" + i.pixiVersionString + "/pixi.js") + '"><\/script>', i.majorPixiVersion < 5 && (n += '<script src="pixi-plugins/pixi-legacy.js"><\/script>');
                for (var s = 0; s < i.exampleRequiredPlugins.length; s++) n += '<script src="pixi-plugins/' + i.exampleRequiredPlugins[s] + '.js"><\/script>';
                i.editor = CodeMirror.fromTextArea(document.getElementById("code"), i.editorOptions), i.exampleRequiredPlugins.length ? e("#code-header").text("Example Code (plugins used: " + i.exampleRequiredPlugins.toString() + ")") : e("#code-header").text("Example Code"), !i.exampleValidVersions.length || i.exampleValidVersions.indexOf(i.majorPixiVersion) > -1 ? (e("#example-title").html(i.exampleTitle), n += "<script>window.onload = function(){" + i.exampleSourceCode + "}<\/script></body></html>", e(".example-frame").show()) : (e("#example-title").html(i.exampleTitle + "<br><br><br><br><br><br><br>The selected version of PixiJS does not work with this example.<br><br>Selected version: v" + i.majorPixiVersion + "<br><br>Required version: v" + i.exampleValidVersions.toString() + "<br><br><br><br><br>"), e(".example-frame").hide());
                var o = document.getElementById("preview"),
                    r = o.contentDocument || o.contentWindow.document;
                r.open(), r.write(n), r.close()
            }, i.openMobileNav = function() {
                TweenMax.to("#line1", i.animTime, {
                    y: 0,
                    ease: Linear.easeNone
                }), TweenMax.to("#line2", 0, {
                    alpha: 0,
                    ease: Linear.easeNone,
                    delay: i.animTime
                }), TweenMax.to("#line3", i.animTime, {
                    y: 0,
                    ease: Linear.easeNone
                }), TweenMax.to("#line1", i.animTime, {
                    rotation: 45,
                    ease: Quart.easeOut,
                    delay: i.animTime
                }), TweenMax.to("#line3", i.animTime, {
                    rotation: -45,
                    ease: Quart.easeOut,
                    delay: i.animTime
                }), e(".main-nav").addClass("mobile-open")
            }, i.closeMobileNav = function() {
                TweenMax.to("#line1", i.animTime, {
                    rotation: 0,
                    ease: Linear.easeNone,
                    delay: 0
                }), TweenMax.to("#line3", i.animTime, {
                    rotation: 0,
                    ease: Linear.easeNone,
                    delay: 0
                }), TweenMax.to("#line2", 0, {
                    alpha: 1,
                    ease: Quart.easeOut,
                    delay: i.animTime
                }), TweenMax.to("#line1", i.animTime, {
                    y: -8,
                    ease: Quart.easeOut,
                    delay: i.animTime
                }), TweenMax.to("#line3", i.animTime, {
                    y: 8,
                    ease: Quart.easeOut,
                    delay: i.animTime
                }), e(".main-nav").removeClass("mobile-open")
            }, i.updateMenu = function() {
                e(".main-nav .main-menu ul li").each(function() {
                    var t = e(this).attr("data-validVersions"); - 1 === ("" === t ? [4, 5] : t.split(",").map(function(e) {
                        return parseInt(e, 10)
                    })).indexOf(i.majorPixiVersion) ? e(this).addClass("invalid") : e(this).removeClass("invalid")
                })
            }, i.updateMenu(), e(".main-header .hamburger").on(i.clickType, function(t) {
                return t.preventDefault(), e(".main-nav").hasClass("mobile-open") ? i.closeMobileNav() : i.openMobileNav(), !1
            }), "" !== window.location.hash) {
            var t = window.location.hash.replace("#/", "").split("/");
            t.length > 1 && e('.main-menu .section[data-section="' + t[0] + '"]').length > 0 && (e('.main-menu .section[data-section="' + t[0] + '"]').trigger(i.clickType), e('.main-menu .section[data-section="' + t[0] + '"]').next().find('li[data-src="' + t[1] + '"]').length > 0 && e('.main-menu .section[data-section="' + t[0] + '"]').next().find('li[data-src="' + t[1] + '"]').trigger(i.clickType))
        } else e(".main-menu .section").eq(0).trigger(i.clickType), e(".main-menu li").eq(0).trigger(i.clickType);
        e(".select-group").on(i.clickType, function() {
            e(this).find(".select").hasClass("open") ? (e(this).find(".select").removeClass("open"), e(this).find("ul").slideUp(150)) : (e(this).find(".select").addClass("open"), e(this).find("ul").slideDown(150))
        }), e(".select-group .select").on(i.clickType, "li", function() {
            e(this).hasClass("selected") || (e(".select-group .select li.selected").removeClass("selected"), e(this).addClass("selected"), e(".select-group .select .current").text(e(this).text()), i.pixiVersionString = e(this).attr("data-val"), i.majorPixiVersion = getMajorPixiVersion(i.pixiVersionString), window.history.pushState(i.pixiVersionString, null, "?v=" + i.pixiVersionString + window.location.hash), i.updateMenu(), i.generateIFrameContent(), e(".main-content").animate({
                scrollTop: 0
            }, 200))
        }), e(".footer .download").on(i.clickType, function() {
            i.SaveToDisk(i.exampleUrl, i.exampleFilename)
        }), e(".reload").on(i.clickType, function() {
            i.exampleSourceCode = i.editor.getValue(), i.generateIFrameContent()
        })
    }, i.SaveToDisk = function(e, i) {
        if (window.ActiveXObject) {
            if (window.ActiveXObject && document.execCommand) {
                var t = window.open(e, "_blank");
                t.document.close(), t.document.execCommand("SaveAs", !0, i || e), t.close()
            }
        } else {
            var a = document.createElement("a");
            a.href = e, a.target = "_blank", a.download = i || "unknown";
            var n = new MouseEvent("click", {
                view: window,
                bubbles: !0,
                cancelable: !1
            });
            a.dispatchEvent(n), (window.URL || window.webkitURL).revokeObjectURL(a.href)
        }
    }, i.init = function() {
        /MSIE (\d+\.\d+);/.test(navigator.userAgent) && (i.clickType = "click"), e(window).resize(i.resize), i.loadScriptsAsync()
    }, i.init()
});